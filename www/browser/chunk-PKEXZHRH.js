import{p as D}from"./chunk-SPESN3BV.js";import"./chunk-MYJO3HAP.js";import"./chunk-AOQDE75R.js";import{A as t,B as u,G as f,O as n,Pa as E,Ra as F,Sa as T,Ta as x,Ua as L,Va as N,Xa as P,Ya as k,Za as A,db as R,ea as I,eb as j,jb as M,ka as s,la as v,ma as y,na as C,nb as O,o as p,oa as b,p as l,pa as w,r as h,sa as S,ta as _,y as g,z as o}from"./chunk-2G2L2QNG.js";import"./chunk-FXM2KW74.js";import"./chunk-NNH6CN3M.js";import"./chunk-HC6MZPB3.js";import"./chunk-4PGTP63H.js";import"./chunk-UKPPH64P.js";import"./chunk-FERD25SW.js";import"./chunk-SYQESB6R.js";import"./chunk-LEIMCQKJ.js";import"./chunk-N3PT3BRI.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-5YEN3EPI.js";import"./chunk-MCRJI3T3.js";import"./chunk-PVZQOOQ7.js";import"./chunk-U2CNLB2V.js";import"./chunk-PVOLIMNR.js";import"./chunk-7QLMNM35.js";import"./chunk-FF3P7ZBM.js";import"./chunk-G3CV3VGG.js";import"./chunk-UDRXED5C.js";import"./chunk-FANUMIDU.js";import"./chunk-SB67TZC5.js";import"./chunk-4U6PRYVA.js";import"./chunk-QXT6YJJ4.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as c}from"./chunk-RW4GY4BD.js";var $=(()=>{let r=class r{constructor(a,i,e){this.fb=a,this.router=i,this.alertController=e,this.loginForm=this.fb.group({email:["",[s.required,s.email]],password:["",s.required]})}login(){return c(this,null,function*(){if(this.loginForm.valid){let{email:a,password:i}=this.loginForm.value;try{let e=yield fetch(`${D}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:i})});if(e.ok){let d=yield e.text(),[G,B]=d.split(","),q=e.headers.get("Authorization");localStorage.setItem("user_id",G),localStorage.setItem("name",B),localStorage.setItem("token",q),window.location.pathname="/"}else this.showLoginErrorAlert()}catch{this.showLoginErrorAlert()}}})}showLoginErrorAlert(){return c(this,null,function*(){yield(yield this.alertController.create({header:"Login Failed",message:"Invalid email or password. Please try again.",buttons:["OK"]})).present()})}navigateToRegister(){this.router.navigate(["/register"])}};r.\u0275fac=function(i){return new(i||r)(l(S),l(I),l(M))},r.\u0275cmp=h({type:r,selectors:[["app-login"]],decls:24,vars:2,consts:[[1,"card-container"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","email","type","email"],["formControlName","password","type","password"],["expand","full","type","submit",3,"disabled"],["expand","full","color","light",3,"click"]],template:function(i,e){i&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n(3,"Login"),t()()(),o(4,"ion-content")(5,"div",0)(6,"ion-card")(7,"ion-card-header")(8,"ion-card-title"),n(9,"Welcome Back to Tripify"),t()(),o(10,"ion-card-content")(11,"form",1),f("ngSubmit",function(){return e.login()}),o(12,"ion-item")(13,"ion-label",2),n(14,"Email"),t(),u(15,"ion-input",3),t(),o(16,"ion-item")(17,"ion-label",2),n(18,"Password"),t(),u(19,"ion-input",4),t(),o(20,"ion-button",5),n(21,"Login"),t()(),o(22,"ion-button",6),f("click",function(){return e.navigateToRegister()}),n(23,"Don't have an account? Register"),t()()()()()),i&2&&(p(11),g("formGroup",e.loginForm),p(9),g("disabled",e.loginForm.invalid))},dependencies:[P,j,R,N,E,O,k,A,F,x,L,T,_,C,v,y,b,w],styles:[".card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-card[_ngcontent-%COMP%]{width:100%;max-width:500px}"]});let m=r;return m})();export{$ as LoginPage};
